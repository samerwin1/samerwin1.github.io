{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"Seth Merwin Individual Datasheet as part of  Private-Use Door Automation for  Team 103  <p>Submission: month, DD, 2025 </p><p></p>","tags":["tag1","tag2"]},{"location":"#introduction","title":"Introduction","text":"<p>This datasheet shows the details of my contribution to the project \"Private-Use Door Automation\". The different pages of the datasheet show resources such as the design process, materials, and cost of my own personally developed subsystem. This subsystem is one part of the greater whole system designed by Team 103.</p>","tags":["tag1","tag2"]},{"location":"#project-summary","title":"Project Summary","text":"<p>The goal of \"Private-Use Door Automation\" is to provide ease of access to consumers through the design of a self-calibrating, automaticly opening and closing door system. While automatic doors are nothing new, the vision is to bring the idea into private homes/properties while also making the technology inexpensive and easy to integrate. More specifically our target consumers are those with disabilities and their caregivers, however we want the product to appeal to anyone desiring efficiency and automation in their home.</p> <p>The product will be installable on any lighter-weight swinging interior door. After a simple install, a single button press will open and promptly close the door while multiple sensors collect data along the path. From then on, the door will automatically open any time someone approaches from either side, wait a period of time, and then automatically close. The multiple sensors will be able to detect any obstacles in the way or variations from the typical path and stop the door from becoming hazardous.</p> <p>The function of the product is acheived through the combination of four embedded subsystems:</p> <ul> <li>Infrared Distance-Sensing Subsystem (focus of this datasheet)</li> <li>Motor Subsystem</li> <li>Rotary Encoder Subsystem</li> <li>Resistive Flex Sensor Subsystem</li> </ul> <p>These four subsystems each play a vital role and communicate with each other in order to control the final product. Each subsystem was designed by an individual member of the team. To learn more about the other subsystems, how they all work together, and the design process of the whole project, you can visit the Team Report Website.</p>","tags":["tag1","tag2"]},{"location":"#my-contribution","title":"My Contribution","text":"<p>My personal contribution to the Private-Use Door Automation project is the Infrared Distance-Sensing Subsystem. It uses two IR emitter/detector pairs which are signal conditioned, amplified, and processed through a microcontroller to provide accurate distance measurements. One pair is placed on either side of the door in order to provide a view of its direct path.</p> <p>During calibration the door opens 90 degrees and then closes. While this happens, the sensors store distance values of the nearest object in their view at several points along the path. In \"standby mode\", the sensors tell the motor to open the door once they detect a person approaching. As the door opens, they periodically check their current values with those stored during calibration. Any inequality in these values sends an alert through the system which stops the motor until the obstruction is clear.</p> <p>This website was created to provide an understanding of how the subsystem was designed and brought to reality.</p> <ul> <li>To learn about the hardware components and their connections to the microcontroller, visit the \"Block Diagram\" page.</li> <li>To understand why specific components were chosen, visit the \"Component Selection\" page.</li> <li>To see the list of materials for the subsystem, visit the \"BOM\" page.</li> <li>To visualize the electrical flow of the circuitry, visit the \"Schematic\" page.</li> <li>To see a breakdown of each component's current draw and how power is provided to the system, visit the \"Power Budget\" page.</li> <li>To see the design of the PCB(Printed Circuit Board), visit the \"PCB Design\" page.</li> <li>Finally, to see additional supporting information not included in the main pages, visit the \"Apendix\" page.</li> </ul>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/","title":"Individal Block Diagram","text":"","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#overview","title":"Overview","text":"<p>This page shows a consructed block diagram representing the hardware components of my personal subsystem which will be embedded into the greater project system. This subsystem focuses on sensing distances to objects from the door which the device will be installed on. There will be one sensor circuit on either side of the door. Each time the device is triggered to open the door, the sensor circuits will be verifying that nothing is in the path of the door as it is opening.</p> <p>Every component in this subsystem will be powered by a 5 volt, 1.5 Amp voltage regulating circuit which itself will be supplied by a 12 volt power source. This is shown by the dashed-line box surrounding the components. The logic and communication functions will be handled by the Microchip PIC18F57Q43 Curiosity-Nano, symbolized by the large block in the center of the diagram. Each other block inside the 5 volt supplied box symbolizes a component which will be connected to the PIC18F57Q43. The directional arrows show whether the components are inputs or outputs and are labeled with their signal type, voltage level, and number of pins. The blocks inside the PIC18F57Q43 block show which pin the components are connected to and what peripheral of the device they will be using.</p> <p>Finally, the block at the bottom of the diagram labeled \"connector 3\" symbolizes a header for the 8-wire ribbon cable which will be used to connect this subsytem to another subsystem (the motor system) within the project. As shown, my subsystem will be receiving 3 signal inputs (2 digital and 1 analog) and sending 2 outputs (both digital). This will allow the two subsystems to communicate with one another based on the programming of the PIC18F57Q43 devices. The goal is to have this distance-sensing subsytem tell the motor subsystem to start, continue running, or stop based on the data it is processing.</p>","tags":["tag1","tag2"]},{"location":"01-Block-Diagram/Block-Diagram/#distance-sensing-subsystem-block-diagram","title":"Distance-Sensing Subsystem Block Diagram","text":"DRAWIO File Link","tags":["tag1","tag2"]},{"location":"02-Component-Selection/Component-Selection/","title":"Component Selection","text":"<p>Description</p> <p>This page shows the process of choosing the hardware for the distance-sensing subsystem of the Private-Use Door Automation project. The tables below show the options that were proposed, each with a list of pros and cons related to the constraints and desired results of the design.</p> <p>Emitter</p> Solution Pros Cons Option 1. OPB732 Long Distance Reflective Switch$4.61/eachlink to product *Emmiter &amp; Detector in one package* Affordable* Already familiar with* Housing to reduce ambient light sensitivity * Low range* Low forward current* Lower wavelength* Most expensive Option 2.TSAL6200 IR Emitting Diode  $0.49/each  Link to product * Least expensive * High radiant power/intensity* Higher peak wavelength* High forward current * No focused casing/lense* Lower peak forward current(although with higher duty cycle)* Does not include detector Option 2.1N6265 IR LED Emitter $0.95/each  Link to product * Inexpensive* More focused casing* High forward current* High power dissipation * Highest forward voltage* Low radiant power* Radiant intensity not listed* Does not include detector <p>Choice: Option 2: TSAL6200 IR Emitting Diode</p> <p>Rationale: While it is tempting to use the OPB732 since it is a paired package, our system needs a higher radiant intensity in order to detect objects further away. Additionally, the higher peak wavelength is ideal in order to distinguish the sensor from ambient visible light sources. While the peak forward currents ratings of the other two options are slightly higher, it is ideal that the TSAL6200 is rated for a higher pulse duty cycle at its peak which improves the refresh rate of the system. Lastly, it is very inexpensive.</p> <p>Detector</p> Solution Pros Cons Option 1. OPB732 Long Distance Reflective Switch$4.61/eachlink to product *Emmiter &amp; Detector in one package* Affordable* Already familiar with* Housing to reduce ambient light sensitivity * Low power dissipation* Higher dark current* Lower breakdown voltage* Most expensive Option 2.QSB34ZR Silicon Pin Photodiode  $1.14/each  Link to product * Affordable * High radiant sensitivity* Daylight-blocking filter* Good power dissipation * Very wide reception angle* Surface mount package(harder to keep in place when not directly on PCB)* Does not include emitter Option 2.BPV23NF Silicon PIN Photodiode $1.08/each  Link to product * Affordable* Daylight-blocking filter* High radiant sensitivity* High power dissipation* Low dark current * Side-mounted(could be hard to place at correct angle for emitter)* Wide range of detectable wavelength* Does not include emitter <p>Choice: Option 3: BPV23NF Silicon PIN Photodiode</p> <p>Rationale: As stated for the emitter selection, a two-in-one package would be convinient, but it is more important that the detector is low-noise yet sensitive enough for precise, longer-range use. Between the QSB34ZR and the BPV23NF, they have very similar features/specifications. The main distinction between them is the reception angle (much higher on the QSB34ZR) which is not ideal for focused reflective sensing. Additionally, the surface-mount packaging would make it more difficult to intsall in a wired configuration. In order to reduce the amount of environmental noise and uphold practical installation, the BPV23NF was chosen.</p> <p>Operational Amplifier</p> Solution Pros Cons Option 1. LMC6482 $5.62/eachlink to product *Affordable* Low input bias current* Rail to rail* Low quiescent current * Lower speed* Lowest slew rate* Headroom loss near rails* Sensitive to heavy loads Option 2. MCP6022  $1.86/each  Link to product * Least expensive option * High GBW* High slew rate* Rail to rail with minimal loss* Low noise* Low quiescent current * Limited load drive* Lowest operating supply range Option 2. OPA2704  $6.36/each  Link to product * Balance of performance and power* Rail to rail* Lowest input offset* Acceptable quiescent current * Most expensive option* Lower speed* Lower slew rate* No through-hole packages in stock <p>Choice: Option 2: MCP6022</p> <p>Rationale: The MCP6022 seems most capable for handling quick-changing analog signals, has low noise, and should have minimal voltage loss when near the rails of the supply. All of these features make it ideal for amplifying the signal of the photodiode without corrupting important data.</p> <p>MOSFET</p> Solution Pros Cons Option 1. 2N7000 $0.21/eachlink to product *Least expensive* Current rating meets goal* Easy to source * Lower current rating than other options* Higher Rds(on)* Lower power dissipation Option 2. IRLZ44NPBF  $1.53/each  Link to product * Affordable * Very high current rating* High power dissipation * More expensive than other options* High Input Capacitance Option 2. FQP13N06L  $0.68/each  Link to product * Inexpensive* Most balanced performance vs cost* Mid-grade current rating * Only sold in bulk* High shipping fee* Higher input capacitance <p>Choice: Option 2: IRLZ44NPBF</p> <p>Rationale: Since the MOSFET will be used for running high current through the IR Emitters, the high current rating and power dissipation make it ideal. Although it has a higher input capacitance, the lower frequency of the pulse signal does not cause concern in this area. While it is the most expensive option, it is still affordable and nowhere near budget-breaking.</p> <p>Voltage Regulator</p> Solution Pros Cons Option 1. LM7805 Linear Voltage Regulator$0.33/eachlink to product *Affordable* Fits project goals* Already provided * Higher voltage dropout* Lower max current* Not optimized for efficiency Option 2. LM1085IT-5.0 Linear Voltage Regulator  $2.13/each  Link to product * Higher current capability * Low voltage dropout* Better regulation characteristics * Expensive* Poor efficiency Option 2. LM2941T Linear Voltage Regulator  $1.72/each  Link to product * Lowest voltage dropout* Low noise* Ranging output voltage * Expensive* Lowest current rating <p>Choice: Option 1: LM7805 Linear Voltage Regulator</p> <p>Rationale: The LM7805 meets the subsystem's needs for supply current, input voltage, and output voltage. On top of meeting the requirements, it has already been provided and therefore there is no reason to order and implement a different option.</p>"},{"location":"03-BOM/BOM/","title":"Bill of Materials","text":"","tags":["tag1","tag2"]},{"location":"03-BOM/BOM/#overview","title":"Overview","text":"<p>This page shows a spreadsheet of all physical components used in the design of the Distance-Sensing Subsystem. The table includes the manufacturer name/part number of each component, how many are needed, how they are sourced, how many are ordered, and the reference designator matching the symbol on the circuit schematic. The Bill of Materials ensures that all parts are accounted for/able to be acquired and that the total cost of all materials stays within the budget of the project.</p>","tags":["tag1","tag2"]},{"location":"03-BOM/BOM/#bill-of-materials","title":"Bill of Materials","text":"<p>The Bill of Materials as a Microsoft Excel file is available to download here.</p>","tags":["tag1","tag2"]},{"location":"04-Schematic/schematic/","title":"Schematic","text":""},{"location":"04-Schematic/schematic/#overview","title":"Overview","text":"<p>This page shows the electrical schematic of the IR Distance-Sensing Subsystem. The different sections of the schematic show different \"modules\" of the whole subsystem. As labeled, the modules include the Power Supply/Voltage Regulator providing power to all components, the 8-pin ribbon wire connecter for connection between subsystems, the IR emitters, the filtered and amplified photodiodes, and the microcontroller handling logic and communication.</p>"},{"location":"04-Schematic/schematic/#schematic-png","title":"Schematic PNG","text":""},{"location":"04-Schematic/schematic/#resouces","title":"Resouces","text":"<p>The schematic as a PDF download is available here, and the Zip folder of the project here.</p>"},{"location":"04-Schematic/schematic/#explanation","title":"Explanation","text":""},{"location":"04-Schematic/schematic/#power-supplyvoltage-regulator","title":"Power Supply/Voltage Regulator","text":"<p>This module of the schematic shows how power is being supplied to the subsystem. At the start of the circuit, 12V DC is supplied through a barrel jack connector. This 12V is sent through a 1.25A fuse for current overdraw protection, then into a linear voltage regulator which supplies the rest of the subsystem with a steady 5V DC supply.</p>"},{"location":"04-Schematic/schematic/#microcontroller","title":"Microcontroller","text":"<p>This module shows the PIC18F57Q43-CNANO, the brain/logic processor of the subsystem. Several net labels show pins on the PIC that are connected to points in different modules. These connections include PWM outputs to the IR Emitters module, ADC inputs from the IR Photodiodes module, and inputs/outputs to/from the Ribbon Cable Connector module. Also connected to the PIC are a pushbutton and an LED for debugging purposes, as well as an extra digital and an extra analog connection to support any required additions to the design.</p>"},{"location":"04-Schematic/schematic/#ir-emitters","title":"IR Emitters","text":"<p>This module shows the IR emitters being driven by N-channel MOSFETs in order to send out a powerful pulse signal of IR light. This light hits the objects on either side of the door and reflects back into the photodiodes with an intensity that is proportional to distance. The Emitter 1 and Emitter 2 tags show the 20kHz pulsed input from the microcontroller going into their respective MOSFET gates. Each time a pulse is received the MOSFET opens the flow from 5V to GND, sending a high current through the IR Emitter, then closes it again. This setup allows the IR Emitters to flash brightly at 20kHZ, allowing it to be distinguished from background IR in the environment. The high current allows the emitters to still output a strong enough radiance for the photodiodes to pick up on.</p>"},{"location":"04-Schematic/schematic/#ir-photodiodes","title":"IR Photodiodes","text":"<p>This module contains the IR photodiodes and supporting circuitry. At the left side are two voltage dividers which provide reference voltages (~0.1V and 2.5V) for the operational amplifiers. Immediately to the right of these are the supply nodes of the operational amplifier (5V for VDD and GND for VSS). To the right of the supply nodes is the dual-stage amplification of the photodiode. The first stage is a transimpedance amplifier which converts the tiny current of the photodiode into a measurable voltage from ~0.1-4.9V. The 22pF capacitor is in parallel with the feedback resistor to filter out the high frequency AC noise while still picking up on the 20kHz signal of the emitters. The second stage is an inverting amplifier with a gain of 1. This flips the extremes of the voltage so that 0.1V becomes 4.9V and vice versa. This means that a small current from the photodiode (an object being far away and therefore reflecting low amounts of light) translates to a large voltage. A larger current from the photodiode (an object being near) translates into a small voltage. The analog output is then sent to the microcontoller which translates the voltages into distance values.</p> <p>The right side of this module is the second photodiode circuit, and works exactly the same way.</p>"},{"location":"04-Schematic/schematic/#ribbon-cable-connector","title":"Ribbon Cable Connector","text":"<p>The final module shows the connections coming in from/going out to the other subsystems. This allows the subsystem to receive analog input about rotational position from the Rotary Encoder Subsystem and inform the the Motor Subsystem to start, stop, or continue rotaion.</p>"},{"location":"04-Schematic/schematic/#result","title":"Result","text":"<p>The combination of these modules results in the subsystem performing its required function: sensing how far away the nearest object is, checking it against the rotational postition provided by the rotary encoder, and communicating to the motor accordingly.</p>"},{"location":"05-Power-Budget/Power-Budget/","title":"Power Budget","text":""},{"location":"05-Power-Budget/Power-Budget/#description","title":"Description","text":"<p>This page shows the power budget for the major components involved in the circuitry of the Distance Sensing Subsystem. The power budget was created to theorize maximum possible current draw from each major electrical component, as well as describe how the power for the system will be supplied. This ensures that the power source/voltage regulator are capable of providing all necessary current to the subsystem without being overloaded.</p>"},{"location":"05-Power-Budget/Power-Budget/#power-budget","title":"Power Budget","text":""},{"location":"05-Power-Budget/Power-Budget/#conclusions","title":"Conclusions","text":"<p>From the Power Budget, it is clear that the 12V wall supply and 5V linear regulator will be sufficient to safely power the subsytem with extra headroom for minor components (resistors, capacitors, etc). It also helps in deciding what size fuse to use at the power supply of the subsystem. Since the maximum current draw of all components in the subsystem is just over 1 Amp, it makes sense to use the next size up in fuse options: 1.25 Amps.</p>"},{"location":"05-Power-Budget/Power-Budget/#resouces","title":"Resouces","text":"<p>The power budget as a PDF download is available here, and a Microsoft Excel Sheet here.</p>"},{"location":"06-PCB-Design/PCB-Design/","title":"PCB(Printed Circuit Board) Design","text":""},{"location":"06-PCB-Design/PCB-Design/#description","title":"Description","text":"<p>This page shows the design of the Printed Circuit Board for the Distance-Sensing subsystem. The purpose of this design is to convert the symbolic electrical schematic into a physically-accurate representation of the circuit board. It is the last phase of the design before physical parts are manufactured and put together. The board is composed of two copper layers- top and bottom. Each component has a specified place on the top layer with pads(isolated copper circles with holes) for each pin to be placed through and soldered to. The top layer is linked to the 5V power source and all pads connected to it. The bottom layer is linked to the GND source and all GND pads. All other pads are connected by copper traces on either side of the board which are isolated from the rest of the copper. Files are generated from this design and sent out as instructions for the PCB to be manufactured.</p>"},{"location":"06-PCB-Design/PCB-Design/#pcb-top-side","title":"PCB Top Side","text":"<p>This image shows the top layer of the PCB.</p> <p></p>"},{"location":"06-PCB-Design/PCB-Design/#pcb-bottom-side","title":"PCB Bottom Side","text":"<p>This image shows the bottom layer of the PCB.</p> <p></p>"},{"location":"06-PCB-Design/PCB-Design/#resouces","title":"Resouces","text":"<p>The PCB front and back images as a PDF download are available here, and a Zip folder of the ECAD project here.</p> <p>The Gerber files used for manufacturing of the PCB are available here.</p>"},{"location":"07-Microcontroller-Code/Microcontroller-Code/","title":"Microcontroller Code","text":""},{"location":"07-Microcontroller-Code/Microcontroller-Code/#description","title":"Description","text":"<p>This page provides the code written and used to program the PIC18F57Q43-CNANO microcontroller for the distance-sensing subsystem.</p>"},{"location":"07-Microcontroller-Code/Microcontroller-Code/#inividual-verification-code","title":"Inividual Verification Code","text":"<p>This is the code used to verify functionality of the distance-sensing subsystem while on its own (not connected to the other subsystems). It uses a button to simulate input from the rotary system during calibration, door opening, and door closing.</p>"},{"location":"07-Microcontroller-Code/Microcontroller-Code/#final-program-code","title":"Final Program Code","text":"<p>This is the final version of the code used in the product (connected to and communicating with the other subsystems).</p>"},{"location":"Appendix/","title":"Appendix - Main Page","text":"<p>The Appendix is where supporting information goes that is not in the main body.</p>"},{"location":"Appendix/another-subfile/","title":"Appendix - Another Subfile","text":"<p>Things to discuss</p>"},{"location":"Appendix/basic-markdown-examples/","title":"Appendix - Basic Markdown Examples","text":""},{"location":"Appendix/basic-markdown-examples/#introduction","title":"Introduction","text":"<p>Bold Text Italic Text Bold and Italic Text</p>"},{"location":"Appendix/basic-markdown-examples/#research-question","title":"Research Question","text":"<ul> <li>Bullet Point 1</li> <li>Bullet Point 2</li> <li>Bullet Point 3</li> </ul>"},{"location":"Appendix/basic-markdown-examples/#images","title":"Images","text":"<p> Figure 2: Early PCB working design</p> <p> Figure 3: Innovation Showcase Spring '25, where the products were a STEM-themed display that demonstrates a single scientific/engineering concept with the intended user of K-12 students interested in learning about science, technology, engineering, or math.</p>"},{"location":"Appendix/basic-markdown-examples/#results","title":"Results","text":"<ol> <li>Numbered Point 1</li> <li>Numbered Point 2</li> <li>Numbered Point 3</li> </ol>"},{"location":"Appendix/basic-markdown-examples/#conclusions-and-future-work","title":"Conclusions and Future Work","text":""},{"location":"Appendix/basic-markdown-examples/#external-links","title":"External Links","text":"<p>example link to idealab</p>"},{"location":"Appendix/basic-markdown-examples/#results_1","title":"Results","text":"<ol> <li>Numbered Point 1</li> <li>Numbered Point 2</li> <li>Numbered Point 3</li> </ol>"},{"location":"Appendix/basic-markdown-examples/#conclusions-and-future-work_1","title":"Conclusions and Future Work","text":""},{"location":"Appendix/basic-markdown-examples/#external-links_1","title":"External Links","text":"<p>example link to idealab</p>"},{"location":"Appendix/basic-markdown-examples/#references","title":"References","text":""},{"location":"Appendix/charts/","title":"Appendix - Charts Example","text":"<pre><code>graph LR\n  A[Start] --&gt; B{Error?};\n  B --&gt;|Yes| C[Hmm...];\n  C --&gt; D[Debug];\n  D --&gt; B;\n  B ----&gt;|No| E[Yay!];</code></pre> <pre><code>sequenceDiagram\n  autonumber\n  Alice-&gt;&gt;John: Hello John, how are you?\n  loop Healthcheck\n      John-&gt;&gt;John: Fight against hypochondria\n  end\n  Note right of John: Rational thoughts!\n  John--&gt;&gt;Alice: Great!\n  John-&gt;&gt;Bob: How about you?\n  Bob--&gt;&gt;John: Jolly good!</code></pre> <pre><code>stateDiagram-v2\n  state fork_state &lt;&lt;fork&gt;&gt;\n    [*] --&gt; fork_state\n    fork_state --&gt; State2\n    fork_state --&gt; State3\n\n    state join_state &lt;&lt;join&gt;&gt;\n    State2 --&gt; join_state\n    State3 --&gt; join_state\n    join_state --&gt; State4\n    State4 --&gt; [*]</code></pre>"},{"location":"Appendix/esp-32-table/","title":"Appendix - Example Controller Table for the ESP32","text":"ESP Info Answer Help Model ? Include the entire part number (leave off any letters at the end that specify the package type) Product Page URL ? Found on Espressif.com ESP32-S3-WROOM-1-N4 Datasheet URL ? Do not paste links directly into the table.  Use a link ESP32 S3 Datasheet URL ? Has more detail on functions ESP32 S3 Technical Reference Manual URL ? Has details on I/O multiplexing, USB, and others Vendor link ? Digikey, Jameco, etc.  Do not paste links directly into the table.  Use a link Code Examples ? url(s) for libraries on github or other sites related to the microcontroller and your planned peripherals External Resources URL(s) ? Search on Google and YouTube for other resources for each specific microcontroller. Unit cost ? Find on Digikey, Jameco, MPJA, or octopart Absolute Maximum Current for entire IC ? Find in the microcontroller datasheet Supply Voltage Range ? Min / Nominal / Max / Absolute Max, as found in datasheet Absolute Maximum current  (for entire IC) ? as found in datasheet Maximum GPIO current  (per pin) ? as found in datasheet Supports External Interrupts? ? as found in datasheet Required Programming Hardware, Cost, URL ? as found in datasheet Module # Available Needed Associated Pins (or * for any) UART ? ? ? external SPI* ? ? ? I2C ? ? ? GPIO ? ? ? ADC ? ? ? LED PWM ? ? ? Motor PWM ? ? ? USB Programmer ? 1 ? ... <p>* The ESP32-S2 has multiple SPI interfaces, but some are for internal use</p>"}]}